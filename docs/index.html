<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HTTP Client • crul</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">crul</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/index.html">Articles</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/crul">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">
<div id="crul" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#crul" class="anchor"> </a>crul</h1></div>

<p>An HTTP client, taking inspiration from Ruby’s <a href="https://rubygems.org/gems/faraday">faraday</a> and Python’s <a href="http://docs.python-requests.org/en/master/">requests</a></p>
<p>Package API:</p>
<ul>
<li>
<code>HttpClient</code> - Main interface to making HTTP requests. Synchronous requests only.</li>
<li>
<code>HttpResponse</code> - HTTP response object, used for all responses across the different clients.</li>
<li>
<code>Async</code> - Asynchronous HTTP requests - a simple interface for many URLS - whose interface is similar to <code>HttpClient</code> - all URLs are treated the same.</li>
<li>
<code>HttpRequest</code> - HTTP request object, used for <code>AsyncVaried</code>
</li>
<li>
<code>AsyncVaried</code> - Asynchronous HTTP requests - accepts any number of <code>HttpRequest</code> objects - with a different interface than <code>HttpClient</code>/<code>Async</code> due to the nature of handling requests with different HTTP methods, options, etc.</li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"> </a>Installation</h2>
<p>CRAN version</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"crul"</span>)</code></pre></div>
<p>Dev version</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">"ropensci/crul"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">"crul"</span>)</code></pre></div>
</div>
<div id="the-client" class="section level2">
<h2 class="hasAnchor">
<a href="#the-client" class="anchor"> </a>the client</h2>
<p><code>HttpClient</code> is where to start</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(x &lt;-<span class="st"> </span>HttpClient$<span class="kw">new</span>(
  <span class="dt">url =</span> <span class="st">"https://httpbin.org"</span>,
  <span class="dt">opts =</span> <span class="kw">list</span>(
    <span class="dt">timeout =</span> <span class="dv">1</span>
  ),
  <span class="dt">headers =</span> <span class="kw">list</span>(
    <span class="dt">a =</span> <span class="st">"hello world"</span>
  )
))
<span class="co">#&gt; &lt;crul connection&gt; </span>
<span class="co">#&gt;   url: https://httpbin.org</span>
<span class="co">#&gt;   curl options: </span>
<span class="co">#&gt;     timeout: 1</span>
<span class="co">#&gt;   proxies: </span>
<span class="co">#&gt;   headers: </span>
<span class="co">#&gt;     a: hello world</span></code></pre></div>
<p>Makes a R6 class, that has all the bits and bobs you’d expect for doing HTTP requests. When it prints, it gives any defaults you’ve set. As you update the object you can see what’s been set</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x$opts
<span class="co">#&gt; $timeout</span>
<span class="co">#&gt; [1] 1</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x$headers
<span class="co">#&gt; $a</span>
<span class="co">#&gt; [1] "hello world"</span></code></pre></div>
<p>You can also pass in curl options when you make HTTP requests, see below for examples.</p>
</div>
<div id="do-some-http" class="section level2">
<h2 class="hasAnchor">
<a href="#do-some-http" class="anchor"> </a>do some http</h2>
<p>The client object created above has http methods that you can call, and pass paths to, as well as query parameters, body values, and any other curl options.</p>
<p>Here, we’ll do a <strong>GET</strong> request on the route <code>/get</code> on our base url <code>https://httpbin.org</code> (the full url is then <code>https://httpbin.org/get</code>)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res &lt;-<span class="st"> </span>x$<span class="kw">get</span>(<span class="st">"get"</span>)</code></pre></div>
<p>The response from a http request is another R6 class <code>HttpResponse</code>, which has slots for the outputs of the request, and some functions to deal with the response:</p>
<p>Status code</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res$status_code
<span class="co">#&gt; [1] 200</span></code></pre></div>
<p>Status information</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res$<span class="kw">status_http</span>()
<span class="co">#&gt; &lt;Status code: 200&gt;</span>
<span class="co">#&gt;   Message: OK</span>
<span class="co">#&gt;   Explanation: Request fulfilled, document follows</span></code></pre></div>
<p>The content</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res$content
<span class="co">#&gt;   [1] 7b 0a 20 20 22 61 72 67 73 22 3a 20 7b 7d 2c 20 0a 20 20 22 68 65 61</span>
<span class="co">#&gt;  [24] 64 65 72 73 22 3a 20 7b 0a 20 20 20 20 22 41 22 3a 20 22 68 65 6c 6c</span>
<span class="co">#&gt;  [47] 6f 20 77 6f 72 6c 64 22 2c 20 0a 20 20 20 20 22 41 63 63 65 70 74 22</span>
<span class="co">#&gt;  [70] 3a 20 22 2a 2f 2a 22 2c 20 0a 20 20 20 20 22 41 63 63 65 70 74 2d 45</span>
<span class="co">#&gt;  [93] 6e 63 6f 64 69 6e 67 22 3a 20 22 67 7a 69 70 2c 20 64 65 66 6c 61 74</span>
<span class="co">#&gt; [116] 65 22 2c 20 0a 20 20 20 20 22 43 6f 6e 6e 65 63 74 69 6f 6e 22 3a 20</span>
<span class="co">#&gt; [139] 22 63 6c 6f 73 65 22 2c 20 0a 20 20 20 20 22 48 6f 73 74 22 3a 20 22</span>
<span class="co">#&gt; [162] 68 74 74 70 62 69 6e 2e 6f 72 67 22 2c 20 0a 20 20 20 20 22 55 73 65</span>
<span class="co">#&gt; [185] 72 2d 41 67 65 6e 74 22 3a 20 22 6c 69 62 63 75 72 6c 2f 37 2e 35 31</span>
<span class="co">#&gt; [208] 2e 30 20 72 2d 63 75 72 6c 2f 32 2e 33 20 63 72 75 6c 2f 30 2e 33 2e</span>
<span class="co">#&gt; [231] 32 2e 39 34 31 34 22 0a 20 20 7d 2c 20 0a 20 20 22 6f 72 69 67 69 6e</span>
<span class="co">#&gt; [254] 22 3a 20 22 31 35 37 2e 31 33 30 2e 31 37 39 2e 38 36 22 2c 20 0a 20</span>
<span class="co">#&gt; [277] 20 22 75 72 6c 22 3a 20 22 68 74 74 70 73 3a 2f 2f 68 74 74 70 62 69</span>
<span class="co">#&gt; [300] 6e 2e 6f 72 67 2f 67 65 74 22 0a 7d 0a</span></code></pre></div>
<p>HTTP method</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res$method
<span class="co">#&gt; [1] "get"</span></code></pre></div>
<p>Request headers</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res$request_headers
<span class="co">#&gt; $useragent</span>
<span class="co">#&gt; [1] "libcurl/7.51.0 r-curl/2.3 crul/0.3.2.9414"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $a</span>
<span class="co">#&gt; [1] "hello world"</span></code></pre></div>
<p>Response headers</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res$response_headers
<span class="co">#&gt; $status</span>
<span class="co">#&gt; [1] "HTTP/1.1 200 OK"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $connection</span>
<span class="co">#&gt; [1] "keep-alive"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $server</span>
<span class="co">#&gt; [1] "gunicorn/19.7.1"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $date</span>
<span class="co">#&gt; [1] "Fri, 24 Mar 2017 23:05:06 GMT"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`content-type`</span>
<span class="co">#&gt; [1] "application/json"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`access-control-allow-origin`</span>
<span class="co">#&gt; [1] "*"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`access-control-allow-credentials`</span>
<span class="co">#&gt; [1] "true"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`content-length`</span>
<span class="co">#&gt; [1] "312"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $via</span>
<span class="co">#&gt; [1] "1.1 vegur"</span></code></pre></div>
<p>And you can parse the content with <code>parse()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res$<span class="kw">parse</span>()
<span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span>
<span class="co">#&gt; [1] "{\n  \"args\": {}, \n  \"headers\": {\n    \"A\": \"hello world\", \n    \"Accept\": \"*/*\", \n    \"Accept-Encoding\": \"gzip, deflate\", \n    \"Connection\": \"close\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"libcurl/7.51.0 r-curl/2.3 crul/0.3.2.9414\"\n  }, \n  \"origin\": \"157.130.179.86\", \n  \"url\": \"https://httpbin.org/get\"\n}\n"</span>
jsonlite::<span class="kw">fromJSON</span>(res$<span class="kw">parse</span>())
<span class="co">#&gt; No encoding supplied: defaulting to UTF-8.</span>
<span class="co">#&gt; $args</span>
<span class="co">#&gt; named list()</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $headers</span>
<span class="co">#&gt; $headers$A</span>
<span class="co">#&gt; [1] "hello world"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $headers$Accept</span>
<span class="co">#&gt; [1] "*/*"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $headers$`Accept-Encoding`</span>
<span class="co">#&gt; [1] "gzip, deflate"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $headers$Connection</span>
<span class="co">#&gt; [1] "close"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $headers$Host</span>
<span class="co">#&gt; [1] "httpbin.org"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $headers$`User-Agent`</span>
<span class="co">#&gt; [1] "libcurl/7.51.0 r-curl/2.3 crul/0.3.2.9414"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $origin</span>
<span class="co">#&gt; [1] "157.130.179.86"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $url</span>
<span class="co">#&gt; [1] "https://httpbin.org/get"</span></code></pre></div>
</div>
<div id="curl-options" class="section level2">
<h2 class="hasAnchor">
<a href="#curl-options" class="anchor"> </a>curl options</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">res &lt;-<span class="st"> </span>HttpClient$<span class="kw">new</span>(<span class="dt">url =</span> <span class="st">"http://api.gbif.org/v1/occurrence/search"</span>)
res$<span class="kw">get</span>(<span class="dt">query =</span> <span class="kw">list</span>(<span class="dt">limit =</span> <span class="dv">100</span>), <span class="dt">timeout_ms =</span> <span class="dv">100</span>)
<span class="co">#&gt; Error in curl::curl_fetch_memory(x$url$url, handle = x$url$handle) :</span>
<span class="co">#&gt;   Timeout was reached</span></code></pre></div>
</div>
<div id="asynchronous-requests" class="section level2">
<h2 class="hasAnchor">
<a href="#asynchronous-requests" class="anchor"> </a>Asynchronous requests</h2>
<p>The simpler interface allows many requests (many URLs), but they all get the same options/headers, etc. and you have to use the same HTTP method on all of them:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(cc &lt;-<span class="st"> </span>Async$<span class="kw">new</span>(
  <span class="dt">urls =</span> <span class="kw">c</span>(
    <span class="st">'https://httpbin.org/'</span>,
    <span class="st">'https://httpbin.org/get?a=5'</span>,
    <span class="st">'https://httpbin.org/get?foo=bar'</span>
  )
))
<span class="co">#&gt; &lt;crul async connection&gt; </span>
<span class="co">#&gt;   urls: </span>
<span class="co">#&gt;    https://httpbin.org/</span>
<span class="co">#&gt;    https://httpbin.org/get?a=5</span>
<span class="co">#&gt;    https://httpbin.org/get?foo=bar</span>
res &lt;-<span class="st"> </span>cc$<span class="kw">get</span>()
<span class="kw">lapply</span>(res, function(z) z$<span class="kw">parse</span>(<span class="st">"UTF-8"</span>))
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [1] "&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta http-equiv='content-type' value='text/html;charset=utf8'&gt;\n  &lt;meta name='generator' value='Ronn/v0.7.3 (http://github.com/rtomayko/ronn/tree/0.7.3)'&gt;\n  &lt;title&gt;httpbin(1): HTTP Client Testing Service&lt;/title&gt;\n  &lt;style type='text/css' media='all'&gt;\n  /* style: man */\n  body#manpage {margin:0}\n  .mp {max-width:100ex;padding:0 9ex 1ex 4ex}\n  .mp p,.mp pre,.mp ul,.mp ol,.mp dl {margin:0 0 20px 0}\n  .mp h2 {margin:10px 0 0 0}\n  .mp &gt; p,.mp &gt; pre,.mp &gt; ul,.mp &gt; ol,.mp &gt; dl {margin-left:8ex}\n  .mp h3 {margin:0 0 0 4ex}\n  .mp dt {margin:0;clear:left}\n  .mp dt.flush {float:left;width:8ex}\n  .mp dd {margin:0 0 0 9ex}\n  .mp h1,.mp h2,.mp h3,.mp h4 {clear:left}\n  .mp pre {margin-bottom:20px}\n  .mp pre+h2,.mp pre+h3 {margin-top:22px}\n  .mp h2+pre,.mp h3+pre {margin-top:5px}\n  .mp img {display:block;margin:auto}\n  .mp h1.man-title {display:none}\n  .mp,.mp code,.mp pre,.mp tt,.mp kbd,.mp samp,.mp h3,.mp h4 {font-family:monospace;font-size:14px;line-height:1.42857142857143}\n  .mp h2 {font-size:16px;line-height:1.25}\n  .mp h1 {font-size:20px;line-height:2}\n  .mp {text-align:justify;background:#fff}\n  .mp,.mp code,.mp pre,.mp pre code,.mp tt,.mp kbd,.mp samp {color:#131211}\n  .mp h1,.mp h2,.mp h3,.mp h4 {color:#030201}\n  .mp u {text-decoration:underline}\n  .mp code,.mp strong,.mp b {font-weight:bold;color:#131211}\n  .mp em,.mp var {font-style:italic;color:#232221;text-decoration:none}\n  .mp a,.mp a:link,.mp a:hover,.mp a code,.mp a pre,.mp a tt,.mp a kbd,.mp a samp {color:#0000ff}\n  .mp b.man-ref {font-weight:normal;color:#434241}\n  .mp pre {padding:0 4ex}\n  .mp pre code {font-weight:normal;color:#434241}\n  .mp h2+pre,h3+pre {padding-left:0}\n  ol.man-decor,ol.man-decor li {margin:3px 0 10px 0;padding:0;float:left;width:33%;list-style-type:none;text-transform:uppercase;color:#999;letter-spacing:1px}\n  ol.man-decor {width:100%}\n  ol.man-decor li.tl {text-align:left}\n  ol.man-decor li.tc {text-align:center;letter-spacing:4px}\n  ol.man-decor li.tr {text-align:right;float:right}\n  &lt;/style&gt;\n  &lt;style type='text/css' media='all'&gt;\n  /* style: 80c */\n  .mp {max-width:86ex}\n  ul {list-style: None; margin-left: 1em!important}\n  .man-navigation {left:101ex}\n  &lt;/style&gt;\n&lt;/head&gt;\n\n&lt;body id='manpage'&gt;\n&lt;a href=\"http://github.com/kennethreitz/httpbin\"&gt;&lt;img style=\"position: absolute; top: 0; right: 0; border: 0;\" src=\"https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png\" alt=\"Fork me on GitHub\"&gt;&lt;/a&gt;\n\n\n\n&lt;div class='mp'&gt;\n&lt;h1&gt;httpbin(1): HTTP Request &amp;amp; Response Service&lt;/h1&gt;\n&lt;p&gt;Freely hosted in &lt;a href=\"http://httpbin.org\"&gt;HTTP&lt;/a&gt;, &lt;a href=\"https://httpbin.org\"&gt;HTTPS&lt;/a&gt;, &amp;amp; &lt;a href=\"http://eu.httpbin.org/\"&gt;EU&lt;/a&gt; flavors by &lt;a href=\"http://kennethreitz.org\"&gt;Kenneth Reitz&lt;/a&gt; &amp;amp; &lt;a href=\"https://www.heroku.com/\"&gt;Heroku&lt;/a&gt;.&lt;/p&gt;\n\n&lt;h2 id=\"ENDPOINTS\"&gt;ENDPOINTS&lt;/h2&gt;\n\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\"/\" data-bare-link=\"true\"&gt;&lt;code&gt;/&lt;/code&gt;&lt;/a&gt; This page.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/ip\" data-bare-link=\"true\"&gt;&lt;code&gt;/ip&lt;/code&gt;&lt;/a&gt; Returns Origin IP.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/user-agent\" data-bare-link=\"true\"&gt;&lt;code&gt;/user-agent&lt;/code&gt;&lt;/a&gt; Returns user-agent.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/headers\" data-bare-link=\"true\"&gt;&lt;code&gt;/headers&lt;/code&gt;&lt;/a&gt; Returns header dict.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/get\" data-bare-link=\"true\"&gt;&lt;code&gt;/get&lt;/code&gt;&lt;/a&gt; Returns GET data.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;/post&lt;/code&gt; Returns POST data.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;/patch&lt;/code&gt; Returns PATCH data.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;/put&lt;/code&gt; Returns PUT data.&lt;/li&gt;\n&lt;li&gt;&lt;code&gt;/delete&lt;/code&gt; Returns DELETE data&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/encoding/utf8\"&gt;&lt;code&gt;/encoding/utf8&lt;/code&gt;&lt;/a&gt; Returns page containing UTF-8 data.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/gzip\" data-bare-link=\"true\"&gt;&lt;code&gt;/gzip&lt;/code&gt;&lt;/a&gt; Returns gzip-encoded data.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/deflate\" data-bare-link=\"true\"&gt;&lt;code&gt;/deflate&lt;/code&gt;&lt;/a&gt; Returns deflate-encoded data.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/brotli\" data-bare-link=\"true\"&gt;&lt;code&gt;/brotli&lt;/code&gt;&lt;/a&gt; Returns brotli-encoded data.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/status/418\"&gt;&lt;code&gt;/status/:code&lt;/code&gt;&lt;/a&gt; Returns given HTTP Status code.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/response-headers?Server=httpbin&amp;amp;Content-Type=text%2Fplain%3B+charset%3DUTF-8\"&gt;&lt;code&gt;/response-headers?key=val&lt;/code&gt;&lt;/a&gt; Returns given response headers.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/redirect/6\"&gt;&lt;code&gt;/redirect/:n&lt;/code&gt;&lt;/a&gt; 302 Redirects &lt;em&gt;n&lt;/em&gt; times.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/redirect-to?url=http%3A%2F%2Fexample.com%2F\"&gt;&lt;code&gt;/redirect-to?url=foo&lt;/code&gt;&lt;/a&gt; 302 Redirects to the &lt;em&gt;foo&lt;/em&gt; URL.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/redirect-to?status_code=307&amp;amp;url=http%3A%2F%2Fexample.com%2F\"&gt;&lt;code&gt;/redirect-to?url=foo&amp;status_code=307&lt;/code&gt;&lt;/a&gt; 307 Redirects to the &lt;em&gt;foo&lt;/em&gt; URL.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/relative-redirect/6\"&gt;&lt;code&gt;/relative-redirect/:n&lt;/code&gt;&lt;/a&gt; 302 Relative redirects &lt;em&gt;n&lt;/em&gt; times.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/absolute-redirect/6\"&gt;&lt;code&gt;/absolute-redirect/:n&lt;/code&gt;&lt;/a&gt; 302 Absolute redirects &lt;em&gt;n&lt;/em&gt; times.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/cookies\" data-bare-link=\"true\"&gt;&lt;code&gt;/cookies&lt;/code&gt;&lt;/a&gt; Returns cookie data.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/cookies/set?k1=v1&amp;amp;k2=v2\"&gt;&lt;code&gt;/cookies/set?name=value&lt;/code&gt;&lt;/a&gt; Sets one or more simple cookies.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/cookies/delete?k1=&amp;amp;k2=\"&gt;&lt;code&gt;/cookies/delete?name&lt;/code&gt;&lt;/a&gt; Deletes one or more simple cookies.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/basic-auth/user/passwd\"&gt;&lt;code&gt;/basic-auth/:user/:passwd&lt;/code&gt;&lt;/a&gt; Challenges HTTPBasic Auth.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/hidden-basic-auth/user/passwd\"&gt;&lt;code&gt;/hidden-basic-auth/:user/:passwd&lt;/code&gt;&lt;/a&gt; 404'd BasicAuth.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/digest-auth/auth/user/passwd/MD5\"&gt;&lt;code&gt;/digest-auth/:qop/:user/:passwd/:algorithm&lt;/code&gt;&lt;/a&gt; Challenges HTTP Digest Auth.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/digest-auth/auth/user/passwd/MD5\"&gt;&lt;code&gt;/digest-auth/:qop/:user/:passwd&lt;/code&gt;&lt;/a&gt; Challenges HTTP Digest Auth.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/stream/20\"&gt;&lt;code&gt;/stream/:n&lt;/code&gt;&lt;/a&gt; Streams &lt;em&gt;min(n, 100)&lt;/em&gt; lines.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/delay/3\"&gt;&lt;code&gt;/delay/:n&lt;/code&gt;&lt;/a&gt; Delays responding for &lt;em&gt;min(n, 10)&lt;/em&gt; seconds.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/drip?duration=5&amp;amp;code=200&amp;amp;numbytes=5\"&gt;&lt;code&gt;/drip?numbytes=n&amp;amp;duration=s&amp;amp;delay=s&amp;amp;code=code&lt;/code&gt;&lt;/a&gt; Drips data over a duration after an optional initial delay, then (optionally) returns with the given status code.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/range/1024\"&gt;&lt;code&gt;/range/1024?duration=s&amp;amp;chunk_size=code&lt;/code&gt;&lt;/a&gt; Streams &lt;em&gt;n&lt;/em&gt; bytes, and allows specifying a &lt;em&gt;Range&lt;/em&gt; header to select a subset of the data. Accepts a &lt;em&gt;chunk_size&lt;/em&gt; and request &lt;em&gt;duration&lt;/em&gt; parameter.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/html\" data-bare-link=\"true\"&gt;&lt;code&gt;/html&lt;/code&gt;&lt;/a&gt; Renders an HTML Page.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/robots.txt\" data-bare-link=\"true\"&gt;&lt;code&gt;/robots.txt&lt;/code&gt;&lt;/a&gt; Returns some robots.txt rules.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/deny\" data-bare-link=\"true\"&gt;&lt;code&gt;/deny&lt;/code&gt;&lt;/a&gt; Denied by robots.txt file.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/cache\" data-bare-link=\"true\"&gt;&lt;code&gt;/cache&lt;/code&gt;&lt;/a&gt; Returns 200 unless an If-Modified-Since or If-None-Match header is provided, when it returns a 304.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/cache/60\"&gt;&lt;code&gt;/cache/:n&lt;/code&gt;&lt;/a&gt; Sets a Cache-Control header for &lt;em&gt;n&lt;/em&gt; seconds.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/bytes/1024\"&gt;&lt;code&gt;/bytes/:n&lt;/code&gt;&lt;/a&gt; Generates &lt;em&gt;n&lt;/em&gt; random bytes of binary data, accepts optional &lt;em&gt;seed&lt;/em&gt; integer parameter.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/stream-bytes/1024\"&gt;&lt;code&gt;/stream-bytes/:n&lt;/code&gt;&lt;/a&gt; Streams &lt;em&gt;n&lt;/em&gt; random bytes of binary data, accepts optional &lt;em&gt;seed&lt;/em&gt; and &lt;em&gt;chunk_size&lt;/em&gt; integer parameters.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/links/10\"&gt;&lt;code&gt;/links/:n&lt;/code&gt;&lt;/a&gt; Returns page containing &lt;em&gt;n&lt;/em&gt; HTML links.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/image\"&gt;&lt;code&gt;/image&lt;/code&gt;&lt;/a&gt; Returns page containing an image based on sent Accept header.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/image/png\"&gt;&lt;code&gt;/image/png&lt;/code&gt;&lt;/a&gt; Returns a PNG image.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/image/jpeg\"&gt;&lt;code&gt;/image/jpeg&lt;/code&gt;&lt;/a&gt; Returns a JPEG image.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/image/webp\"&gt;&lt;code&gt;/image/webp&lt;/code&gt;&lt;/a&gt; Returns a WEBP image.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/image/svg\"&gt;&lt;code&gt;/image/svg&lt;/code&gt;&lt;/a&gt; Returns a SVG image.&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/forms/post\" data-bare-link=\"true\"&gt;&lt;code&gt;/forms/post&lt;/code&gt;&lt;/a&gt; HTML form that submits to &lt;em&gt;/post&lt;/em&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\"/xml\" data-bare-link=\"true\"&gt;&lt;code&gt;/xml&lt;/code&gt;&lt;/a&gt; Returns some XML&lt;/li&gt;\n&lt;/ul&gt;\n\n\n&lt;h2 id=\"DESCRIPTION\"&gt;DESCRIPTION&lt;/h2&gt;\n\n&lt;p&gt;Testing an HTTP Library can become difficult sometimes. &lt;a href=\"http://requestb.in\"&gt;RequestBin&lt;/a&gt; is fantastic for testing POST requests, but doesn't let you control the response. This exists to cover all kinds of HTTP scenarios. Additional endpoints are being considered.&lt;/p&gt;\n\n&lt;p&gt;All endpoint responses are JSON-encoded.&lt;/p&gt;\n\n&lt;h2 id=\"EXAMPLES\"&gt;EXAMPLES&lt;/h2&gt;\n\n&lt;h3 id=\"-curl-http-httpbin-org-ip\"&gt;$ curl http://httpbin.org/ip&lt;/h3&gt;\n\n&lt;pre&gt;&lt;code&gt;{\"origin\": \"24.127.96.129\"}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h3 id=\"-curl-http-httpbin-org-user-agent\"&gt;$ curl http://httpbin.org/user-agent&lt;/h3&gt;\n\n&lt;pre&gt;&lt;code&gt;{\"user-agent\": \"curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8l zlib/1.2.3\"}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h3 id=\"-curl-http-httpbin-org-get\"&gt;$ curl http://httpbin.org/get&lt;/h3&gt;\n\n&lt;pre&gt;&lt;code&gt;{\n   \"args\": {},\n   \"headers\": {\n      \"Accept\": \"*/*\",\n      \"Connection\": \"close\",\n      \"Content-Length\": \"\",\n      \"Content-Type\": \"\",\n      \"Host\": \"httpbin.org\",\n      \"User-Agent\": \"curl/7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8l zlib/1.2.3\"\n   },\n   \"origin\": \"24.127.96.129\",\n   \"url\": \"http://httpbin.org/get\"\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h3 id=\"-curl-I-http-httpbin-org-status-418\"&gt;$ curl -I http://httpbin.org/status/418&lt;/h3&gt;\n\n&lt;pre&gt;&lt;code&gt;HTTP/1.1 418 I'M A TEAPOT\nServer: nginx/0.7.67\nDate: Mon, 13 Jun 2011 04:25:38 GMT\nConnection: close\nx-more-info: http://tools.ietf.org/html/rfc2324\nContent-Length: 135\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h3 id=\"-curl-https-httpbin-org-get-show_env-1\"&gt;$ curl https://httpbin.org/get?show_env=1&lt;/h3&gt;\n\n&lt;pre&gt;&lt;code&gt;{\n  \"headers\": {\n    \"Content-Length\": \"\",\n    \"Accept-Language\": \"en-US,en;q=0.8\",\n    \"Accept-Encoding\": \"gzip,deflate,sdch\",\n    \"X-Forwarded-Port\": \"443\",\n    \"X-Forwarded-For\": \"109.60.101.240\",\n    \"Host\": \"httpbin.org\",\n    \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\",\n    \"User-Agent\": \"Mozilla/5.0 (X11; Linux i686) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.83 Safari/535.11\",\n    \"X-Request-Start\": \"1350053933441\",\n    \"Accept-Charset\": \"ISO-8859-1,utf-8;q=0.7,*;q=0.3\",\n    \"Connection\": \"keep-alive\",\n    \"X-Forwarded-Proto\": \"https\",\n    \"Cookie\": \"_gauges_unique_day=1; _gauges_unique_month=1; _gauges_unique_year=1; _gauges_unique=1; _gauges_unique_hour=1\",\n    \"Content-Type\": \"\"\n  },\n  \"args\": {\n    \"show_env\": \"1\"\n  },\n  \"origin\": \"109.60.101.240\",\n  \"url\": \"http://httpbin.org/get?show_env=1\"\n}\n&lt;/code&gt;&lt;/pre&gt;\n\n&lt;h2 id=\"Installing-and-running-from-PyPI\"&gt;Installing and running from PyPI&lt;/h2&gt;\n\n&lt;p&gt;You can install httpbin as a library from PyPI and run it as a WSGI app.  For example, using Gunicorn:&lt;/p&gt;\n\n&lt;pre&gt;&lt;code class=\"bash\"&gt;$ pip install httpbin\n$ gunicorn httpbin:app\n&lt;/code&gt;&lt;/pre&gt;\n\n\n&lt;h2 id=\"AUTHOR\"&gt;AUTHOR&lt;/h2&gt;\n\n&lt;p&gt;A &lt;a href=\"http://kennethreitz.com/\"&gt;Kenneth Reitz&lt;/a&gt; project.&lt;/p&gt;\n\n&lt;h2 id=\"SEE-ALSO\"&gt;SEE ALSO&lt;/h2&gt;\n\n&lt;p&gt;&lt;a href=\"https://www.hurl.it\"&gt;Hurl.it&lt;/a&gt; - Make HTTP requests.&lt;/p&gt;\n&lt;p&gt;&lt;a href=\"http://requestb.in\"&gt;RequestBin&lt;/a&gt; - Inspect HTTP requests.&lt;/p&gt;\n&lt;p&gt;&lt;a href=\"http://python-requests.org\" data-bare-link=\"true\"&gt;http://python-requests.org&lt;/a&gt;&lt;/p&gt;\n\n&lt;/div&gt;\n\n\n    \n&lt;script type=\"text/javascript\"&gt;\n  (function() {\n    window._pa = window._pa || {};\n    _pa.productId = \"httpbin\";\n    var pa = document.createElement('script'); pa.type = 'text/javascript'; pa.async = true;\n    pa.src = ('https:' == document.location.protocol ? 'https:' : 'http:') + \"//tag.perfectaudience.com/serve/5226171f87bc6890da0000a0.js\";\n    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(pa, s);\n  })();\n&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n  var _gauges = _gauges || [];\n  (function() {\n    var t   = document.createElement('script');\n    t.type  = 'text/javascript';\n    t.async = true;\n    t.id    = 'gauges-tracker';\n    t.setAttribute('data-site-id', '58cb2e71c88d9043ac01d000');\n    t.setAttribute('data-track-path', 'https://track.gaug.es/track.gif');\n    t.src = 'https://d36ee2fcip1434.cloudfront.net/track.js';\n    var s = document.getElementsByTagName('script')[0];\n    s.parentNode.insertBefore(t, s);\n  })();\n&lt;/script&gt;\n\n\n&lt;/body&gt;\n&lt;/html&gt;"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; [1] "{\n  \"args\": {\n    \"a\": \"5\"\n  }, \n  \"headers\": {\n    \"Accept\": \"*/*\", \n    \"Accept-Encoding\": \"gzip, deflate\", \n    \"Connection\": \"close\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"libcurl/7.51.0 r-curl/2.3 crul/0.3.2.9414\"\n  }, \n  \"origin\": \"157.130.179.86\", \n  \"url\": \"https://httpbin.org/get?a=5\"\n}\n"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; [1] "{\n  \"args\": {\n    \"foo\": \"bar\"\n  }, \n  \"headers\": {\n    \"Accept\": \"*/*\", \n    \"Accept-Encoding\": \"gzip, deflate\", \n    \"Connection\": \"close\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"libcurl/7.51.0 r-curl/2.3 crul/0.3.2.9414\"\n  }, \n  \"origin\": \"157.130.179.86\", \n  \"url\": \"https://httpbin.org/get?foo=bar\"\n}\n"</span></code></pre></div>
<p>The <code>AsyncVaried</code> interface accepts any number of <code>HttpRequest</code> objects, which can define any type of HTTP request of any HTTP method:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">req1 &lt;-<span class="st"> </span>HttpRequest$<span class="kw">new</span>(
  <span class="dt">url =</span> <span class="st">"https://httpbin.org/get"</span>,
  <span class="dt">opts =</span> <span class="kw">list</span>(<span class="dt">verbose =</span> <span class="ot">TRUE</span>),
  <span class="dt">headers =</span> <span class="kw">list</span>(<span class="dt">foo =</span> <span class="st">"bar"</span>)
)$<span class="kw">get</span>()
req2 &lt;-<span class="st"> </span>HttpRequest$<span class="kw">new</span>(<span class="dt">url =</span> <span class="st">"https://httpbin.org/post"</span>)$<span class="kw">post</span>()
out &lt;-<span class="st"> </span>AsyncVaried$<span class="kw">new</span>(req1, req2)</code></pre></div>
<p>Execute the requests</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">out$<span class="kw">request</span>()</code></pre></div>
<p>Then functions get applied to all responses:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">out$<span class="kw">status</span>()
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; &lt;Status code: 200&gt;</span>
<span class="co">#&gt;   Message: OK</span>
<span class="co">#&gt;   Explanation: Request fulfilled, document follows</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; &lt;Status code: 200&gt;</span>
<span class="co">#&gt;   Message: OK</span>
<span class="co">#&gt;   Explanation: Request fulfilled, document follows</span>
out$<span class="kw">parse</span>()
<span class="co">#&gt; [1] "{\n  \"args\": {}, \n  \"headers\": {\n    \"Accept\": \"*/*\", \n    \"Accept-Encoding\": \"gzip, deflate\", \n    \"Connection\": \"close\", \n    \"Foo\": \"bar\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"libcurl/7.51.0 r-curl/2.3 crul/0.3.2.9414\"\n  }, \n  \"origin\": \"157.130.179.86\", \n  \"url\": \"https://httpbin.org/get\"\n}\n"                                                                                                                                                      </span>
<span class="co">#&gt; [2] "{\n  \"args\": {}, \n  \"data\": \"\", \n  \"files\": {}, \n  \"form\": {}, \n  \"headers\": {\n    \"Accept\": \"*/*\", \n    \"Accept-Encoding\": \"gzip, deflate\", \n    \"Connection\": \"close\", \n    \"Content-Length\": \"0\", \n    \"Content-Type\": \"application/x-www-form-urlencoded\", \n    \"Host\": \"httpbin.org\", \n    \"User-Agent\": \"libcurl/7.51.0 r-curl/2.3 crul/0.3.2.9414\"\n  }, \n  \"json\": null, \n  \"origin\": \"157.130.179.86\", \n  \"url\": \"https://httpbin.org/post\"\n}\n"</span></code></pre></div>
</div>
<div id="to-do" class="section level2">
<h2 class="hasAnchor">
<a href="#to-do" class="anchor"> </a>TO DO</h2>
<div id="http-caching" class="section level3">
<h3 class="hasAnchor">
<a href="#http-caching" class="anchor"> </a>http caching</h3>
<p>Add integration for:</p>
<ul>
<li><a href="https://github.com/ropensci/webmockr">webmockr</a></li>
<li><a href="https://github.com/ropensci/vcr">vcr</a></li>
</ul>
<p>for flexible and easy HTTP request caching</p>
</div>
</div>
<div id="meta" class="section level2">
<h2 class="hasAnchor">
<a href="#meta" class="anchor"> </a>Meta</h2>
<ul>
<li>Please <a href="https://github.com/ropensci/crul/issues">report any issues or bugs</a>.</li>
<li>License: MIT</li>
<li>Get citation information for <code>crul</code> in R doing <code>citation(package = 'crul')</code>
</li>
<li>Please note that this project is released with a <a href="CONDUCT.md">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</li>
</ul>
<p><a href="https://ropensci.org"><img src="https://ropensci.org/public_images/github_footer.png" alt="ropensci_footer"></a></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cran.r-project.org/package=crul">https://​cran.r-project.org/​package=crul</a>
</li>
<li>Browse source code at <br><a href="https://github.com/ropensci/crul">https://​github.com/​ropensci/​crul</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ropensci/crul/issues">https://​github.com/​ropensci/​crul/​issues</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Scott Chamberlain <br><small class="roles"> Author, maintainer </small> </li>
</ul>
<html><body>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active - The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://travis-ci.org/ropensci/crul"><img src="https://travis-ci.org/ropensci/crul.svg?branch=master" alt="Build Status"></a></li>
<li><a href="https://codecov.io/gh/ropensci/crul"><img src="https://codecov.io/gh/ropensci/crul/branch/master/graph/badge.svg" alt="codecov"></a></li>
<li><a href="https://github.com/metacran/cranlogs.app"><img src="http://cranlogs.r-pkg.org/badges/crul" alt="rstudio mirror downloads"></a></li>
<li><a href="https://cran.r-project.org/package=crul"><img src="http://www.r-pkg.org/badges/version/crul" alt="cran version"></a></li>
</ul>
</body></html>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Scott Chamberlain.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
